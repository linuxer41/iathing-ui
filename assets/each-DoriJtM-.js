import{E as N,a as S,b as W,c as F,q as Y,d as Z}from"./props-6qQ5bo8B.js";import{h as $}from"./create-runtime-stories-C3zgKRry.js";import{d as j,e as ee,g as V,I as M,f as G,h as J,p as re,j as K,k as z,m as B,n as ae,o as ne,q as ie,s as le,t as fe,v as ue,w as te,x as ve,y as U,z as se}from"./runtime-CiaCc-Cc.js";function me(i,e){return e}function oe(i,e,a,u){for(var v=[],s=e.length,c=0;c<s;c++)ae(e[c].e,v,!0);var p=s>0&&v.length===0&&a!==null;if(p){var d=a.parentNode;ne(d),d.append(a),u.clear(),x(i,e[0].prev,e[s-1].next)}ie(v,()=>{for(var E=0;E<s;E++){var o=e[E];p||(u.delete(o.k),x(i,o.prev,o.next)),le(o.e,!p)}})}function ge(i,e,a,u,v,s=null){var c=i,p={flags:e,items:new Map,first:null},d=(e&F)!==0;if(d){var E=i;c=E.appendChild(j())}var o=null,h=!1,I=fe(()=>{var r=a();return ue(r)?r:r==null?[]:K(r)});ee(()=>{var r=V(I),l=r.length;if(!(h&&l===0)){h=l===0;{var t=te;ce(r,p,c,v,e,(t.f&M)!==0,u)}s!==null&&(l===0?o?G(o):o=J(()=>s(c)):o!==null&&re(o,()=>{o=null})),V(I)}})}function ce(i,e,a,u,v,s,c,p){var R,D,L,y;var d=(v&Z)!==0,E=(v&(S|N))!==0,o=i.length,h=e.items,I=e.first,r=I,l,t=null,T,_=[],m=[],w,A,n,f;if(d)for(f=0;f<o;f+=1)w=i[f],A=c(w,f),n=h.get(A),n!==void 0&&((R=n.a)==null||R.measure(),(T??(T=new Set)).add(n));for(f=0;f<o;f+=1){if(w=i[f],A=c(w,f),n=h.get(A),n===void 0){var P=r?r.e.nodes_start:a;t=_e(P,e,t,t===null?e.first:t.next,w,A,f,u,v),h.set(A,t),_=[],m=[],r=t.next;continue}if(E&&de(n,w,f,v),n.e.f&M&&(G(n.e),d&&((D=n.a)==null||D.unfix(),(T??(T=new Set)).delete(n))),n!==r){if(l!==void 0&&l.has(n)){if(_.length<m.length){var k=m[0],g;t=k.prev;var q=_[0],b=_[_.length-1];for(g=0;g<_.length;g+=1)X(_[g],k,a);for(g=0;g<m.length;g+=1)l.delete(m[g]);x(e,q.prev,b.next),x(e,t,q),x(e,b,k),r=k,t=b,f-=1,_=[],m=[]}else l.delete(n),X(n,r,a),x(e,n.prev,n.next),x(e,n,t===null?e.first:t.next),x(e,t,n),t=n;continue}for(_=[],m=[];r!==null&&r.k!==A;)(s||!(r.e.f&M))&&(l??(l=new Set)).add(r),m.push(r),r=r.next;if(r===null)continue;n=r}_.push(n),t=n,r=n.next}if(r!==null||l!==void 0){for(var C=l===void 0?[]:K(l);r!==null;)(s||!(r.e.f&M))&&C.push(r),r=r.next;var H=C.length;if(H>0){var Q=v&F&&o===0?a:null;if(d){for(f=0;f<H;f+=1)(L=C[f].a)==null||L.measure();for(f=0;f<H;f+=1)(y=C[f].a)==null||y.fix()}oe(e,C,Q,h)}}d&&Y(()=>{var O;if(T!==void 0)for(n of T)(O=n.a)==null||O.apply()}),z.first=e.first&&e.first.e,z.last=t&&t.e}function de(i,e,a,u){u&S&&B(i.v,e),u&N?B(i.i,a):i.i=a}function _e(i,e,a,u,v,s,c,p,d,E){var o=(d&S)!==0,h=(d&W)===0,I=o?h?ve(v):U(v):v,r=d&N?U(c):c,l={i:r,v:I,k:s,a:null,e:null,prev:a,next:u};try{return l.e=J(()=>p(i,I,r),$),l.e.prev=a&&a.e,l.e.next=u&&u.e,a===null?e.first=l:(a.next=l,a.e.next=l.e),u!==null&&(u.prev=l,u.e.prev=l.e),l}finally{}}function X(i,e,a){for(var u=i.next?i.next.e.nodes_start:a,v=e?e.e.nodes_start:a,s=i.e.nodes_start;s!==u;){var c=se(s);v.before(s),s=c}}function x(i,e,a){e===null?i.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}export{ge as e,me as i};
